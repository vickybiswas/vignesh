(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[974],{2243:(e,t,a)=>{"use strict";a.d(t,{default:()=>eI});var s=a(5155),l=a(2115),r=a(7168),n=a(3999);let i=l.forwardRef((e,t)=>{let{className:a,type:l,...r}=e;return(0,s.jsx)("input",{type:l,className:(0,n.cn)("flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-base ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium file:text-foreground placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",a),ref:t,...r})});i.displayName="Input";var o=a(9449),c=a(3052),d=a(5196),u=a(9428);let m=o.bL,f=o.l9;o.YJ,o.ZL,o.Pb,o.z6,l.forwardRef((e,t)=>{let{className:a,inset:l,children:r,...i}=e;return(0,s.jsxs)(o.ZP,{ref:t,className:(0,n.cn)("flex cursor-default gap-2 select-none items-center rounded-sm px-2 py-1.5 text-sm outline-none focus:bg-accent data-[state=open]:bg-accent [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0",l&&"pl-8",a),...i,children:[r,(0,s.jsx)(c.A,{className:"ml-auto"})]})}).displayName=o.ZP.displayName,l.forwardRef((e,t)=>{let{className:a,...l}=e;return(0,s.jsx)(o.G5,{ref:t,className:(0,n.cn)("z-50 min-w-[8rem] overflow-hidden rounded-md border bg-popover p-1 text-popover-foreground shadow-lg data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",a),...l})}).displayName=o.G5.displayName;let x=l.forwardRef((e,t)=>{let{className:a,sideOffset:l=4,...r}=e;return(0,s.jsx)(o.ZL,{children:(0,s.jsx)(o.UC,{ref:t,sideOffset:l,className:(0,n.cn)("z-50 min-w-[8rem] overflow-hidden rounded-md border bg-popover p-1 text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",a),...r})})});x.displayName=o.UC.displayName;let p=l.forwardRef((e,t)=>{let{className:a,inset:l,...r}=e;return(0,s.jsx)(o.q7,{ref:t,className:(0,n.cn)("relative flex cursor-default select-none items-center gap-2 rounded-sm px-2 py-1.5 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0",l&&"pl-8",a),...r})});p.displayName=o.q7.displayName,l.forwardRef((e,t)=>{let{className:a,children:l,checked:r,...i}=e;return(0,s.jsxs)(o.H_,{ref:t,className:(0,n.cn)("relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",a),checked:r,...i,children:[(0,s.jsx)("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:(0,s.jsx)(o.VF,{children:(0,s.jsx)(d.A,{className:"h-4 w-4"})})}),l]})}).displayName=o.H_.displayName,l.forwardRef((e,t)=>{let{className:a,children:l,...r}=e;return(0,s.jsxs)(o.hN,{ref:t,className:(0,n.cn)("relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",a),...r,children:[(0,s.jsx)("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:(0,s.jsx)(o.VF,{children:(0,s.jsx)(u.A,{className:"h-2 w-2 fill-current"})})}),l]})}).displayName=o.hN.displayName;let h=l.forwardRef((e,t)=>{let{className:a,inset:l,...r}=e;return(0,s.jsx)(o.JU,{ref:t,className:(0,n.cn)("px-2 py-1.5 text-sm font-semibold",l&&"pl-8",a),...r})});h.displayName=o.JU.displayName;let g=l.forwardRef((e,t)=>{let{className:a,...l}=e;return(0,s.jsx)(o.wv,{ref:t,className:(0,n.cn)("-mx-1 my-1 h-px bg-muted",a),...l})});g.displayName=o.wv.displayName;var j=a(5452),v=a(4416);let b=j.bL;j.l9;let N=j.ZL;j.bm;let y=l.forwardRef((e,t)=>{let{className:a,...l}=e;return(0,s.jsx)(j.hJ,{ref:t,className:(0,n.cn)("fixed inset-0 z-50 bg-black/80  data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",a),...l})});y.displayName=j.hJ.displayName;let w=l.forwardRef((e,t)=>{let{className:a,children:l,...r}=e;return(0,s.jsxs)(N,{children:[(0,s.jsx)(y,{}),(0,s.jsxs)(j.UC,{ref:t,className:(0,n.cn)("fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg",a),...r,children:[l,(0,s.jsxs)(j.bm,{className:"absolute right-4 top-4 rounded-sm opacity-70 ring-offset-background transition-opacity hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none data-[state=open]:bg-accent data-[state=open]:text-muted-foreground",children:[(0,s.jsx)(v.A,{className:"h-4 w-4"}),(0,s.jsx)("span",{className:"sr-only",children:"Close"})]})]})]})});w.displayName=j.UC.displayName;let C=e=>{let{className:t,...a}=e;return(0,s.jsx)("div",{className:(0,n.cn)("flex flex-col space-y-1.5 text-center sm:text-left",t),...a})};C.displayName="DialogHeader";let k=l.forwardRef((e,t)=>{let{className:a,...l}=e;return(0,s.jsx)(j.hE,{ref:t,className:(0,n.cn)("text-lg font-semibold leading-none tracking-tight",a),...l})});k.displayName=j.hE.displayName;let S=l.forwardRef((e,t)=>{let{className:a,...l}=e;return(0,s.jsx)(j.VY,{ref:t,className:(0,n.cn)("text-sm text-muted-foreground",a),...l})});S.displayName=j.VY.displayName;var R=a(2918),F=a(6474),A=a(7863);let L=R.bL;R.YJ;let O=R.WT,T=l.forwardRef((e,t)=>{let{className:a,children:l,...r}=e;return(0,s.jsxs)(R.l9,{ref:t,className:(0,n.cn)("flex h-10 w-full items-center justify-between rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 [&>span]:line-clamp-1",a),...r,children:[l,(0,s.jsx)(R.In,{asChild:!0,children:(0,s.jsx)(F.A,{className:"h-4 w-4 opacity-50"})})]})});T.displayName=R.l9.displayName;let E=l.forwardRef((e,t)=>{let{className:a,...l}=e;return(0,s.jsx)(R.PP,{ref:t,className:(0,n.cn)("flex cursor-default items-center justify-center py-1",a),...l,children:(0,s.jsx)(A.A,{className:"h-4 w-4"})})});E.displayName=R.PP.displayName;let z=l.forwardRef((e,t)=>{let{className:a,...l}=e;return(0,s.jsx)(R.wn,{ref:t,className:(0,n.cn)("flex cursor-default items-center justify-center py-1",a),...l,children:(0,s.jsx)(F.A,{className:"h-4 w-4"})})});z.displayName=R.wn.displayName;let _=l.forwardRef((e,t)=>{let{className:a,children:l,position:r="popper",...i}=e;return(0,s.jsx)(R.ZL,{children:(0,s.jsxs)(R.UC,{ref:t,className:(0,n.cn)("relative z-50 max-h-96 min-w-[8rem] overflow-hidden rounded-md border bg-popover text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2","popper"===r&&"data-[side=bottom]:translate-y-1 data-[side=left]:-translate-x-1 data-[side=right]:translate-x-1 data-[side=top]:-translate-y-1",a),position:r,...i,children:[(0,s.jsx)(E,{}),(0,s.jsx)(R.LM,{className:(0,n.cn)("p-1","popper"===r&&"h-[var(--radix-select-trigger-height)] w-full min-w-[var(--radix-select-trigger-width)]"),children:l}),(0,s.jsx)(z,{})]})})});_.displayName=R.UC.displayName,l.forwardRef((e,t)=>{let{className:a,...l}=e;return(0,s.jsx)(R.JU,{ref:t,className:(0,n.cn)("py-1.5 pl-8 pr-2 text-sm font-semibold",a),...l})}).displayName=R.JU.displayName;let $=l.forwardRef((e,t)=>{let{className:a,children:l,...r}=e;return(0,s.jsxs)(R.q7,{ref:t,className:(0,n.cn)("relative flex w-full cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",a),...r,children:[(0,s.jsx)("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:(0,s.jsx)(R.VF,{children:(0,s.jsx)(d.A,{className:"h-4 w-4"})})}),(0,s.jsx)(R.p4,{children:l})]})});$.displayName=R.q7.displayName,l.forwardRef((e,t)=>{let{className:a,...l}=e;return(0,s.jsx)(R.wv,{ref:t,className:(0,n.cn)("-mx-1 my-1 h-px bg-muted",a),...l})}).displayName=R.wv.displayName;var B=a(5396),U=a(8482),I=a(5204),V=a(6891),Z=a(7924),M=a(9676),P=a(7808);function D(e){let{content:t,currentSearchResults:a,savedSearches:n,onSelectSearch:i,onSelectSpecificSearch:o,onRemoveSearch:d,highlightedSearch:u}=e,[m,f]=(0,l.useState)(null),x=e=>{let a=[],s=t.toLowerCase().indexOf(e.toLowerCase());for(;-1!==s;)a.push({text:t.slice(s,s+e.length),start:s,stop:s+e.length}),s=t.toLowerCase().indexOf(e.toLowerCase(),s+1);return a};return(0,s.jsxs)(U.Zp,{className:"w-full h-full",children:[(0,s.jsx)(U.aR,{children:(0,s.jsxs)(U.ZB,{className:"flex items-center gap-2",children:[(0,s.jsx)(Z.A,{className:"h-5 w-5"}),"Search Analysis"]})}),(0,s.jsx)(U.Wu,{children:(0,s.jsx)(V.F,{className:"h-[300px] pr-4",children:(0,s.jsxs)("div",{className:"space-y-4",children:[(0,s.jsxs)(I.Nt,{children:[(0,s.jsxs)(I.R6,{className:"flex w-full items-center gap-2 rounded-lg border bg-card p-4 text-left hover:bg-accent",children:[(0,s.jsx)(c.A,{className:"h-4 w-4 shrink-0 transition-transform duration-200 group-data-[state=open]:rotate-90"}),(0,s.jsx)(Z.A,{className:"h-4 w-4"}),(0,s.jsx)("span",{className:"font-semibold",children:"Current Search"}),(0,s.jsxs)("span",{className:"ml-auto rounded-full bg-muted px-2 py-0.5 text-sm text-muted-foreground",children:[a.length," ",1===a.length?"result":"results"]})]}),(0,s.jsx)(I.Ke,{className:"mt-2 space-y-2",children:null==a?void 0:a.map((e,t)=>(0,s.jsx)(P.$,{text:e.text,start:e.start,stop:e.stop,isHighlighted:u===e.text,onClick:()=>o(e)},t))})]}),(0,s.jsxs)(I.Nt,{children:[(0,s.jsxs)(I.R6,{className:"flex w-full items-center gap-2 rounded-lg border bg-card p-4 text-left hover:bg-accent",children:[(0,s.jsx)(c.A,{className:"h-4 w-4 shrink-0 transition-transform duration-200 group-data-[state=open]:rotate-90"}),(0,s.jsx)(M.A,{className:"h-4 w-4"}),(0,s.jsx)("span",{className:"font-semibold",children:"Saved Searches"}),(0,s.jsxs)("span",{className:"ml-auto rounded-full bg-muted px-2 py-0.5 text-sm text-muted-foreground",children:[n.length," ",1===n.length?"search":"searches"]})]}),(0,s.jsx)(I.Ke,{className:"mt-2 space-y-2",children:null==n?void 0:n.map((e,t)=>{let a=x(e);return(0,s.jsxs)(I.Nt,{children:[(0,s.jsxs)(I.R6,{className:"flex w-full items-center gap-2 rounded-lg border bg-card p-4 text-left hover:bg-accent ".concat(u===e?"bg-green-200":""),onClick:()=>i(e),children:[(0,s.jsx)(c.A,{className:"h-4 w-4 shrink-0 transition-transform duration-200 group-data-[state=open]:rotate-90"}),(0,s.jsx)(Z.A,{className:"h-4 w-4 text-muted-foreground"}),(0,s.jsx)("span",{children:e}),(0,s.jsxs)("span",{className:"ml-auto rounded-full bg-muted px-2 py-0.5 text-sm text-muted-foreground",children:[a.length," ",1===a.length?"occurrence":"occurrences"]}),(0,s.jsx)(r.$,{size:"icon",variant:"ghost",className:"ml-2 h-6 w-6",onClick:t=>{t.stopPropagation(),d(e)},children:(0,s.jsx)(v.A,{className:"h-4 w-4"})})]}),(0,s.jsx)(I.Ke,{className:"mt-2 space-y-2",children:null==a?void 0:a.map((t,a)=>(0,s.jsx)(P.$,{text:t.text,start:t.start,stop:t.stop,isHighlighted:u===e,onClick:()=>o(t)},a))})]},t)})})]})]})})})]})}var W=a(81),J=a(7740);let H=l.forwardRef((e,t)=>{let{className:a,...l}=e;return(0,s.jsx)(J.uB,{ref:t,className:(0,n.cn)("flex h-full w-full flex-col overflow-hidden rounded-md bg-popover text-popover-foreground",a),...l})});H.displayName=J.uB.displayName;let K=l.forwardRef((e,t)=>{let{className:a,...l}=e;return(0,s.jsxs)("div",{className:"flex items-center border-b px-3","cmdk-input-wrapper":"",children:[(0,s.jsx)(Z.A,{className:"mr-2 h-4 w-4 shrink-0 opacity-50"}),(0,s.jsx)(J.uB.Input,{ref:t,className:(0,n.cn)("flex h-11 w-full rounded-md bg-transparent py-3 text-sm outline-none placeholder:text-muted-foreground disabled:cursor-not-allowed disabled:opacity-50",a),...l})]})});K.displayName=J.uB.Input.displayName;let Y=l.forwardRef((e,t)=>{let{className:a,...l}=e;return(0,s.jsx)(J.uB.List,{ref:t,className:(0,n.cn)("max-h-[300px] overflow-y-auto overflow-x-hidden",a),...l})});Y.displayName=J.uB.List.displayName;let q=l.forwardRef((e,t)=>(0,s.jsx)(J.uB.Empty,{ref:t,className:"py-6 text-center text-sm",...e}));q.displayName=J.uB.Empty.displayName;let G=l.forwardRef((e,t)=>{let{className:a,...l}=e;return(0,s.jsx)(J.uB.Group,{ref:t,className:(0,n.cn)("overflow-hidden p-1 text-foreground [&_[cmdk-group-heading]]:px-2 [&_[cmdk-group-heading]]:py-1.5 [&_[cmdk-group-heading]]:text-xs [&_[cmdk-group-heading]]:font-medium [&_[cmdk-group-heading]]:text-muted-foreground",a),...l})});G.displayName=J.uB.Group.displayName,l.forwardRef((e,t)=>{let{className:a,...l}=e;return(0,s.jsx)(J.uB.Separator,{ref:t,className:(0,n.cn)("-mx-1 h-px bg-border",a),...l})}).displayName=J.uB.Separator.displayName;let X=l.forwardRef((e,t)=>{let{className:a,...l}=e;return(0,s.jsx)(J.uB.Item,{ref:t,className:(0,n.cn)("relative flex cursor-default gap-2 select-none items-center rounded-sm px-2 py-1.5 text-sm outline-none data-[disabled=true]:pointer-events-none data-[selected='true']:bg-accent data-[selected=true]:text-accent-foreground data-[disabled=true]:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0",a),...l})});X.displayName=J.uB.Item.displayName;var Q=a(547);let ee=Q.bL,et=Q.l9,ea=l.forwardRef((e,t)=>{let{className:a,align:l="center",sideOffset:r=4,...i}=e;return(0,s.jsx)(Q.ZL,{children:(0,s.jsx)(Q.UC,{ref:t,align:l,sideOffset:r,className:(0,n.cn)("z-50 w-72 rounded-md border bg-popover p-4 text-popover-foreground shadow-md outline-none data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",a),...i})})});function es(e){let{options:t,selected:a,onChange:i,placeholder:o}=e,[c,u]=l.useState(!1),m=l.useCallback(e=>{u(!1),i(a.includes(e)?a.filter(t=>t!==e):[...a,e])},[a,i]);return(0,s.jsxs)(ee,{open:c,onOpenChange:u,children:[(0,s.jsx)(et,{asChild:!0,children:(0,s.jsxs)(r.$,{variant:"outline",role:"combobox","aria-expanded":c,className:"w-full justify-between",children:[a.length>0?"".concat(a.length," selected"):o||"Select items...",(0,s.jsx)(W.A,{className:"ml-2 h-4 w-4 shrink-0 opacity-50"})]})}),(0,s.jsx)(ea,{className:"w-full p-0",children:(0,s.jsxs)(H,{children:[(0,s.jsx)(K,{placeholder:"Search items..."}),(0,s.jsxs)(Y,{children:[(0,s.jsx)(q,{children:"No item found."}),(0,s.jsx)(G,{className:"max-h-64 overflow-auto",children:t.map(e=>(0,s.jsxs)(X,{onSelect:()=>m(e),children:[(0,s.jsx)(d.A,{className:(0,n.cn)("mr-2 h-4 w-4",a.includes(e)?"opacity-100":"opacity-0")}),e]},e))})]})]})})]})}ea.displayName=Q.UC.displayName;let el=l.forwardRef((e,t)=>{let{className:a,...l}=e;return(0,s.jsx)("div",{className:"relative w-full overflow-auto",children:(0,s.jsx)("table",{ref:t,className:(0,n.cn)("w-full caption-bottom text-sm",a),...l})})});el.displayName="Table";let er=l.forwardRef((e,t)=>{let{className:a,...l}=e;return(0,s.jsx)("thead",{ref:t,className:(0,n.cn)("[&_tr]:border-b",a),...l})});er.displayName="TableHeader";let en=l.forwardRef((e,t)=>{let{className:a,...l}=e;return(0,s.jsx)("tbody",{ref:t,className:(0,n.cn)("[&_tr:last-child]:border-0",a),...l})});en.displayName="TableBody",l.forwardRef((e,t)=>{let{className:a,...l}=e;return(0,s.jsx)("tfoot",{ref:t,className:(0,n.cn)("border-t bg-muted/50 font-medium [&>tr]:last:border-b-0",a),...l})}).displayName="TableFooter";let ei=l.forwardRef((e,t)=>{let{className:a,...l}=e;return(0,s.jsx)("tr",{ref:t,className:(0,n.cn)("border-b transition-colors hover:bg-muted/50 data-[state=selected]:bg-muted",a),...l})});ei.displayName="TableRow";let eo=l.forwardRef((e,t)=>{let{className:a,...l}=e;return(0,s.jsx)("th",{ref:t,className:(0,n.cn)("h-12 px-4 text-left align-middle font-medium text-muted-foreground [&:has([role=checkbox])]:pr-0",a),...l})});eo.displayName="TableHead";let ec=l.forwardRef((e,t)=>{let{className:a,...l}=e;return(0,s.jsx)("td",{ref:t,className:(0,n.cn)("p-4 align-middle [&:has([role=checkbox])]:pr-0",a),...l})});ec.displayName="TableCell",l.forwardRef((e,t)=>{let{className:a,...l}=e;return(0,s.jsx)("caption",{ref:t,className:(0,n.cn)("mt-4 text-sm text-muted-foreground",a),...l})}).displayName="TableCaption";var ed=a(1788);function eu(e){let{state:t,onClose:a,onSelectOccurrence:n,setState:i,activeFile:o}=e,c=(0,l.useMemo)(()=>{let e={rows:[],columns:[],extend_type:0};return t.tabulations&&t.tabulations.length>0&&(e=t.tabulations[0]),{rows:e.rows||[],columns:e.columns||[],extend_type:e.extend_type||0}},[t.tabulations]),[d,u]=(0,l.useState)(c.rows),[m,f]=(0,l.useState)(c.columns),[x,p]=(0,l.useState)(c.extend_type),[h,g]=(0,l.useState)(null),[j,N]=(0,l.useState)(null),y=(0,l.useCallback)(()=>{i(e=>({...e,tabulations:[{rows:d,columns:m,extend_type:x},...e.tabulations.slice(1)]}))},[d,m,x,i]),S=(0,l.useMemo)(()=>{let e=new Set;return t.markings.forEach(t=>{e.add(t.text)}),Array.from(e)},[t.markings]),R=(0,l.useCallback)(e=>{let a=[];return Object.entries(t.files).forEach(t=>{let[s,l]=t,r=l.positions[e]||[];a=a.concat(r.map(e=>({...e,file:s})))}),a},[t.files]),F=(0,l.useMemo)(()=>{if(0===d.length||0===m.length)return null;let e={};return d.forEach(a=>{e[a]={};let s=t.markings.find(e=>e.text===a);if(!s)return;let l=R(s.id),r=0;m.forEach(s=>{let n=t.markings.find(e=>e.text===s);if(!n)return;let i=R(n.id),o=l.filter(e=>i.some(t=>0===x?t.file===e.file&&Math.max(e.start,t.start)<Math.min(e.stop,t.stop):t.file===e.file&&t.start===e.start&&t.stop===e.stop));e[a][s]={count:o.length,occurrences:o},r+=o.length}),e[a].Total={count:r,occurrences:[]}}),e.Total={},m.forEach(t=>{let a=d.reduce((a,s)=>{var l;return a+((null===(l=e[s][t])||void 0===l?void 0:l.count)||0)},0);e.Total[t]={count:a,occurrences:[]}}),e.Total.Total={count:m.reduce((t,a)=>{var s;return t+((null===(s=e.Total[a])||void 0===s?void 0:s.count)||0)},0),occurrences:[]},e},[d,m,t.markings,R,x]),A=(0,l.useCallback)(()=>{if(!F)return;let e=new Blob([[["Intersection",...m,"Total"],...d.map(e=>[e,...m.map(t=>F[e][t].count),F[e].Total.count]),["Total",...m.map(e=>F.Total[e].count),F.Total.Total.count]].map(e=>e.join(",")).join("\n")],{type:"text/csv;charset=utf-8;"}),t=document.createElement("a");if(void 0!==t.download){let a=URL.createObjectURL(e);t.setAttribute("href",a),t.setAttribute("download","tabulation.csv"),t.style.visibility="hidden",document.body.appendChild(t),t.click(),document.body.removeChild(t)}},[F,d,m]),E=(0,l.useCallback)(e=>{N(e),n(e),y(),a()},[n,a,y]);return((0,l.useCallback)(()=>{y(),a()},[y,a]),0===Object.keys(t.files).length)?(0,s.jsxs)(U.Zp,{className:"fixed inset-0 z-50 flex flex-col",children:[(0,s.jsx)(U.aR,{className:"flex-shrink-0",children:(0,s.jsxs)(U.ZB,{className:"flex justify-between items-center",children:[(0,s.jsx)("span",{children:"Tabulation View"}),(0,s.jsx)(r.$,{variant:"ghost",size:"icon",onClick:a,children:(0,s.jsx)(v.A,{className:"h-4 w-4"})})]})}),(0,s.jsx)(U.Wu,{className:"flex-grow overflow-auto",children:(0,s.jsx)("div",{className:"text-center text-muted-foreground",children:"No files available for tabulation."})})]}):(0,s.jsxs)(U.Zp,{className:"fixed inset-0 z-50 flex flex-col",children:[(0,s.jsx)(U.aR,{className:"flex-shrink-0",children:(0,s.jsxs)(U.ZB,{className:"flex justify-between items-center",children:[(0,s.jsx)("span",{children:"Tabulation View"}),(0,s.jsxs)("div",{className:"flex gap-2",children:[(0,s.jsxs)(r.$,{variant:"outline",onClick:A,disabled:!F,children:[(0,s.jsx)(ed.A,{className:"h-4 w-4 mr-2"}),"Export to CSV"]}),(0,s.jsx)(r.$,{variant:"ghost",size:"icon",onClick:a,children:(0,s.jsx)(v.A,{className:"h-4 w-4"})})]})]})}),(0,s.jsx)(U.Wu,{className:"flex-grow overflow-auto",children:(0,s.jsxs)("div",{className:"space-y-4",children:[(0,s.jsxs)("div",{className:"flex gap-4",children:[(0,s.jsx)(es,{options:S,selected:d,onChange:u,placeholder:"Select row items"}),(0,s.jsx)(es,{options:S,selected:m,onChange:f,placeholder:"Select column items"}),(0,s.jsxs)("div",{className:"flex flex-col gap-1",children:[(0,s.jsx)("span",{className:"text-sm font-medium",children:"Extend Search Type"}),(0,s.jsxs)(L,{value:x.toString(),onValueChange:e=>p(Number.parseInt(e)),children:[(0,s.jsx)(T,{className:"w-[180px]",children:(0,s.jsx)(O,{placeholder:"Select expansion type"})}),(0,s.jsxs)(_,{children:[(0,s.jsx)($,{value:"0",children:"No Expand"}),(0,s.jsx)($,{value:"1",children:"Sentence Expand"}),(0,s.jsx)($,{value:"2",children:"Paragraph Expand"})]})]})]})]}),F?(0,s.jsxs)(el,{children:[(0,s.jsx)(er,{children:(0,s.jsxs)(ei,{children:[(0,s.jsx)(eo,{className:"w-[100px]",children:"Intersection"}),m.map(e=>(0,s.jsx)(eo,{children:e},e)),(0,s.jsx)(eo,{children:"Total"})]})}),(0,s.jsxs)(en,{children:[d.map(e=>(0,s.jsxs)(ei,{children:[(0,s.jsx)(ec,{className:"font-medium",children:e}),m.map(t=>(0,s.jsx)(ec,{className:"cursor-pointer hover:bg-muted",onClick:()=>g({row:e,col:t}),children:F[e][t].count},t)),(0,s.jsx)(ec,{children:F[e].Total.count})]},e)),(0,s.jsxs)(ei,{children:[(0,s.jsx)(ec,{className:"font-medium",children:"Total"}),m.map(e=>(0,s.jsx)(ec,{children:F.Total[e].count},e)),(0,s.jsx)(ec,{children:F.Total.Total.count})]})]})]}):(0,s.jsx)("div",{className:"text-center text-muted-foreground",children:"Select row and column items to generate the tabulation."})]})}),h&&F&&(0,s.jsx)(b,{open:!!h,onOpenChange:()=>g(null),children:(0,s.jsxs)(w,{children:[(0,s.jsx)(C,{children:(0,s.jsxs)(k,{children:["Occurrences for ",h.row," ∩ ",h.col]})}),(0,s.jsx)(V.F,{className:"h-[300px]",children:F[h.row][h.col].occurrences.map((e,t)=>(0,s.jsx)("div",{className:"mb-4",children:(0,s.jsx)(P.$,{text:e.text,start:e.start,stop:e.stop,isHighlighted:(null==j?void 0:j.start)===e.start&&(null==j?void 0:j.stop)===e.stop,onClick:()=>E(e)})},t))})]})})]})}var em=a(9869),ef=a(4126),ex=a(8828),ep=a(2335);function eh(e){let{isOpen:t,setIsOpen:a,newFileName:l,setNewFileName:n,handleAddFile:o,fileAddError:c}=e;return(0,s.jsx)(b,{open:!!t,onOpenChange:a,children:(0,s.jsxs)(w,{className:"max-w-sm",children:[(0,s.jsx)(C,{children:(0,s.jsx)(k,{className:"text-black-600",children:"Add file"})}),(0,s.jsx)("div",{className:"text-center text-gray-700 py-4",children:(0,s.jsxs)("div",{className:"mt-4 space-y-2",children:[(0,s.jsx)("div",{className:"flex items-center space-x-2",children:(0,s.jsx)(i,{type:"text",placeholder:"New file name",value:l,onChange:e=>n(e.target.value),onKeyPress:e=>"Enter"===e.key&&o()})}),c&&(0,s.jsx)("div",{className:"text-red-600",children:c})]})}),(0,s.jsxs)("div",{className:"flex justify-end gap-2 mt-4",children:[(0,s.jsx)(r.$,{variant:"outline",onClick:()=>a(""),children:"Cancel"}),(0,s.jsx)(r.$,{onClick:o,children:"Add"})]})]})})}function eg(e){let{files:t,activeFile:a,onSelectFile:i,onAddFile:o,onUploadFile:c,onSaveFile:d,onRemoveFile:u}=e,[m,f]=(0,l.useState)(""),[x,p]=(0,l.useState)(!1),h=(0,l.useRef)(null),[g,j]=(0,l.useState)("");return(0,s.jsxs)("div",{className:"w-64 border-r p-4 h-full flex flex-col",children:[(0,s.jsxs)("div",{className:"flex justify-between items-center",children:[(0,s.jsx)("h2",{className:"text-lg font-semibold",children:"Files"}),(0,s.jsxs)("div",{children:[(0,s.jsx)(r.$,{size:"icon",variant:"outline",onClick:()=>{var e;return null===(e=h.current)||void 0===e?void 0:e.click()},children:(0,s.jsx)(em.A,{className:"h-4 w-4"})}),(0,s.jsx)("input",{type:"file",ref:h,className:"hidden",onChange:e=>{var t;let a=null===(t=e.target.files)||void 0===t?void 0:t[0];a&&c(a)},accept:".txt,.md,.json"})]})]}),(0,s.jsx)("ul",{className:"space-y-2 flex-grow overflow-auto",children:t.map(e=>(0,s.jsx)("li",{className:"flex items-center",children:(0,s.jsxs)(ep.jc,{openDelay:0,closeDelay:0,children:[(0,s.jsx)(ep.d0,{asChild:!0,children:(0,s.jsx)(r.$,{variant:e===a?"secondary":"ghost",className:"w-full justify-between ct-20",onClick:()=>i(e),children:e})}),(0,s.jsxs)(ep.Et,{side:"right",sideOffset:"-7",align:"end",className:"bg-red-100",children:[(0,s.jsx)(r.$,{variant:"ghost",size:"icon",onClick:()=>d(e),className:"hover:bg-black hover:text-white",children:(0,s.jsx)(ed.A,{className:"h-4 w-4"})}),(0,s.jsx)(r.$,{variant:"ghost",size:"icon",onClick:()=>u(e),className:"hover:bg-black hover:text-white",children:(0,s.jsx)(ef.A,{className:"h-4 w-4"})})]})]})},e))}),(0,s.jsx)(eh,{isOpen:x,setIsOpen:p,newFileName:m,setNewFileName:f,handleAddFile:()=>{let e=m.trim(),a=(0,n.U)(e),s=(0,n.N)(e);return a.isValid?t.includes(s)?j(ex.D.fileExistWithSameName):void(o(s,""),f(""),j(""),p(!1)):j(a.error||"")},fileAddError:g})]})}var ej=a(1007),ev=a(2098),eb=a(3509),eN=a(9803),ey=a(1362);function ew(){let[e,t]=(0,l.useState)(!1),[a,n]=(0,l.useState)(""),{setTheme:o,theme:c}=(0,ey.D)();return(0,l.useEffect)(()=>{let e=localStorage.getItem("openai_api_key");e&&n(e)},[]),(0,s.jsxs)(s.Fragment,{children:[(0,s.jsxs)(m,{children:[(0,s.jsx)(f,{asChild:!0,children:(0,s.jsx)(r.$,{variant:"ghost",className:"w-8 h-8 rounded-full",children:(0,s.jsx)(ej.A,{className:"h-4 w-4"})})}),(0,s.jsxs)(x,{align:"end",children:[(0,s.jsx)(h,{children:"Vicky Biswas"}),(0,s.jsx)(g,{}),(0,s.jsxs)(p,{onClick:()=>{o("dark"===c?"light":"dark")},children:["dark"===c?(0,s.jsx)(ev.A,{className:"mr-2 h-4 w-4"}):(0,s.jsx)(eb.A,{className:"mr-2 h-4 w-4"}),"Toggle theme"]}),(0,s.jsxs)(p,{onClick:()=>t(!0),children:[(0,s.jsx)(eN.A,{className:"mr-2 h-4 w-4"}),"Set OpenAI API Key"]})]})]}),(0,s.jsx)(b,{open:e,onOpenChange:t,children:(0,s.jsxs)(w,{children:[(0,s.jsxs)(C,{children:[(0,s.jsx)(k,{children:"Set OpenAI API Key"}),(0,s.jsx)(S,{children:"Enter your OpenAI API key to enable AI-powered features."})]}),(0,s.jsx)(i,{type:"password",placeholder:"Enter your API key",value:a,onChange:e=>n(e.target.value)}),(0,s.jsx)(r.$,{onClick:()=>{localStorage.setItem("openai_api_key",a),t(!1)},children:"Save"})]})})]})}var eC=a(5112),ek=a(4229),eS=a(2659);function eR(){let e=Math.floor(360*Math.random());return"hsl(".concat(e,", 100%, 80%)")}var eF=a(6981);let eA=l.forwardRef((e,t)=>{let{className:a,...l}=e;return(0,s.jsx)(eF.bL,{ref:t,className:(0,n.cn)("peer h-4 w-4 shrink-0 rounded-sm border border-primary ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-primary data-[state=checked]:text-primary-foreground",a),...l,children:(0,s.jsx)(eF.C1,{className:(0,n.cn)("flex items-center justify-center text-current"),children:(0,s.jsx)(d.A,{className:"h-4 w-4"})})})});eA.displayName=eF.bL.displayName;var eL=a(1154);function eO(e){let{word:t,synonyms:a,isLoading:n,onClose:i,onSave:o}=e,[c,d]=(0,l.useState)([]),u=e=>{d(t=>t.includes(e)?t.filter(t=>t!==e):[...t,e])},m=a.length>0?a:["sample","text","part","click","tags"];return(0,s.jsx)(b,{open:!0,onOpenChange:i,children:(0,s.jsxs)(w,{className:"sm:max-w-md",children:[(0,s.jsx)(C,{children:(0,s.jsxs)(k,{children:['Synonyms for "',t,'"']})}),n?(0,s.jsxs)("div",{className:"flex justify-center items-center py-8",children:[(0,s.jsx)(eL.A,{className:"h-8 w-8 animate-spin text-primary"}),(0,s.jsx)("span",{className:"ml-2",children:"Fetching synonyms..."})]}):(0,s.jsxs)(s.Fragment,{children:[(0,s.jsxs)("div",{className:"flex justify-between mb-2",children:[(0,s.jsx)(r.$,{variant:"outline",size:"sm",onClick:()=>{d(a)},children:"Select All"}),(0,s.jsx)(r.$,{variant:"outline",size:"sm",onClick:()=>{d([])},children:"Deselect All"})]}),(0,s.jsx)(V.F,{className:"h-[300px] pr-4",children:(0,s.jsx)("div",{className:"space-y-2",children:m.map(e=>(0,s.jsxs)("div",{className:"flex items-center space-x-2 p-2 rounded hover:bg-accent",children:[(0,s.jsx)(eA,{id:"synonym-".concat(e),checked:c.includes(e),onCheckedChange:()=>u(e)}),(0,s.jsx)("label",{htmlFor:"synonym-".concat(e),className:"text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70 cursor-pointer flex-1",children:e})]},e))})}),(0,s.jsxs)("div",{className:"flex justify-end space-x-2 mt-4",children:[(0,s.jsx)(r.$,{variant:"outline",onClick:i,children:"Cancel"}),(0,s.jsxs)(r.$,{onClick:()=>{o(c)},disabled:0===c.length,children:["Save ",c.length>0&&"(".concat(c.length,")")]})]})]})]})})}function eT(e){let{isOpen:t,setIsOpen:a,warningMessage:l,onConfirm:n}=e;return(0,s.jsx)(b,{open:!!t,onOpenChange:a,children:(0,s.jsxs)(w,{className:"max-w-sm",children:[(0,s.jsx)(C,{children:(0,s.jsx)(k,{className:"text-red-600",children:"Warning"})}),(0,s.jsx)("div",{className:"text-center text-gray-700 py-4",children:l}),(0,s.jsxs)("div",{className:"flex justify-end gap-2 mt-4",children:[(0,s.jsx)(r.$,{variant:"outline",onClick:()=>a(""),children:"Cancel"}),(0,s.jsx)(r.$,{variant:"destructive",onClick:n,children:"Confirm"})]})]})})}var eE=a(8021),ez=a(9730);let e_=e=>{let{className:t,...a}=e;return(0,s.jsx)(ez.YZ,{className:(0,n.cn)("flex h-full w-full data-[panel-group-direction=vertical]:flex-col",t),...a})},e$=ez.Zk,eB=e=>{let{withHandle:t,className:a,...l}=e;return(0,s.jsx)(ez.TW,{className:(0,n.cn)("relative flex w-px items-center justify-center bg-border after:absolute after:inset-y-0 after:left-1/2 after:w-1 after:-translate-x-1/2 focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring focus-visible:ring-offset-1 data-[panel-group-direction=vertical]:h-px data-[panel-group-direction=vertical]:w-full data-[panel-group-direction=vertical]:after:left-0 data-[panel-group-direction=vertical]:after:h-1 data-[panel-group-direction=vertical]:after:w-full data-[panel-group-direction=vertical]:after:-translate-y-1/2 data-[panel-group-direction=vertical]:after:translate-x-0 [&[data-panel-group-direction=vertical]>div]:rotate-90",a),...l,children:t&&(0,s.jsx)("div",{className:"z-10 flex h-4 w-3 items-center justify-center rounded-sm border bg-border",children:(0,s.jsx)(eE.A,{className:"h-2.5 w-2.5"})})})},eU="textViewerState";function eI(){var e,t;let[a,n]=(0,l.useState)(()=>{{let e=localStorage.getItem(eU);if(e)return JSON.parse(e)}return{files:{"sample.txt":{name:"sample.txt",content:"This is a sample text. You can right-click on any part of this text to add tags to it, including overlapping tags.",tags:{},dirty:!1}},activeFile:"sample.txt",tabulations:[]}}),[o,c]=(0,l.useState)(""),[d,u]=(0,l.useState)(null),[h,j]=(0,l.useState)(null),[N,y]=(0,l.useState)(""),[S,R]=(0,l.useState)(!1),[F,A]=(0,l.useState)("all"),[E,z]=(0,l.useState)(""),[U,I]=(0,l.useState)(!1),[V,M]=(0,l.useState)(!1),[P,W]=(0,l.useState)([]),[J,H]=(0,l.useState)(!1),K=(0,l.useRef)(null),Y=(0,l.useRef)(null),q=a.files[a.activeFile];(0,l.useEffect)(()=>{localStorage.setItem(eU,JSON.stringify(a))},[a]);let G=(0,l.useCallback)(e=>{e.preventDefault();let t=window.getSelection();if(!t||0===t.toString().length||!K.current)return;let a=t.getRangeAt(0),s=a.cloneRange();s.selectNodeContents(K.current),s.setEnd(a.startContainer,a.startOffset);let l=s.toString().length,r=l+t.toString().length;l!==r&&(u({start:l,end:r}),j({x:e.clientX,y:e.clientY}))},[]),X=(0,l.useCallback)(function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"Tag";if(!d||!e.trim())return;let s=q.content.slice(d.start,d.end),l="".concat(t.toLowerCase(),"-").concat(e.replace(/\s+/g,"-").toLowerCase()),r=q.tags[l];n(e=>{let n={...e.files[a.activeFile].tags};return r?n[l]={...r,occurrences:[...r.occurrences,{text:s,start:d.start,end:d.end}]}:n[l]={type:t,color:eR(),occurrences:[{text:s,start:d.start,end:d.end}]},{...e,files:{...e.files,[a.activeFile]:{...e.files[a.activeFile],tags:n}}}}),u(null),j(null)},[a.activeFile,q,d]),Q=(0,l.useCallback)(()=>{R(!0)},[]),ee=(0,l.useCallback)(()=>{N.trim()&&(X(N),y(""),R(!1))},[X,N]);(0,l.useCallback)(()=>{let e=[];return Object.entries(q.tags).forEach(t=>{let[a,s]=t;"Tag"===s.type&&("all"===F||a.includes(F))&&e.push({id:a,tag:s})}),e},[q.tags,F]);let et=(0,l.useMemo)(()=>{if(!E)return[];let e="search-".concat(E.replace(/\s+/g,"-").toLowerCase()),t=q.tags[e];if(t)return t.occurrences;let a=[],s=q.content.toLowerCase().indexOf(E.toLowerCase()),l=0;for(;-1!==s&&(a.push({text:q.content.slice(s,s+E.length),start:s,end:s+E.length}),s=q.content.toLowerCase().indexOf(E.toLowerCase(),s+1),!(++l>1e3)););return a},[q.tags,q.content,E]),ea=(0,l.useCallback)(()=>{if(!E||0===et.length)return;let e="search-".concat(E.replace(/\s+/g,"-").toLowerCase());q.tags[e]||n(t=>({...t,files:{...t.files,[a.activeFile]:{...t.files[a.activeFile],tags:{...t.files[a.activeFile].tags,[e]:{type:"Search",color:eR(),occurrences:et}}}}}))},[E,et,q.tags,a.activeFile]),es=(0,l.useMemo)(()=>{let e=[];return Object.entries(q.tags).forEach(t=>{let[a,s]=t;if("Tag"===s.type){let t=a.split("-").slice(1).join("-");e.includes(t)||e.push(t)}}),e},[q.tags]),el=(0,l.useMemo)(()=>{let e=[];return Object.entries(q.tags).forEach(t=>{let[a,s]=t;if("Search"===s.type){let t=a.split("-").slice(1).join("-");e.includes(t)||e.push(t)}}),e},[q.tags]),er=(0,l.useCallback)(e=>{console.log(e,"newContent"),n(t=>({...t,files:{...t.files,[a.activeFile]:{...t.files[a.activeFile],content:e,dirty:!0}}}))},[a.activeFile]),en=(0,l.useCallback)(e=>{n(t=>({...t,activeFile:e})),A("all"),z("")},[]),ei=(0,l.useCallback)((e,t)=>{a.files[e]||n(a=>({...a,files:{...a.files,[e]:{name:e,content:t,tags:{},dirty:!0}},activeFile:e}))},[a.files]),eo=(0,l.useCallback)(e=>{let t=new FileReader;t.onload=t=>{var a;let s=null===(a=t.target)||void 0===a?void 0:a.result;ei(e.name,s)},t.readAsText(e)},[ei]),ec=(0,l.useCallback)(e=>{A(t=>t===e?"all":e)},[]),ef=(0,l.useCallback)(e=>{z(t=>t===e?"":e),A("all")},[]),ep=(0,l.useCallback)(e=>{if(K.current){let t=document.createRange(),a=K.current.firstChild;if(a){t.setStart(a,e.start),t.setEnd(a,e.end);let s=t.getBoundingClientRect(),l=K.current.getBoundingClientRect();K.current.scrollTo({top:s.top-l.top-50,behavior:"smooth"})}}},[]),eh=(0,l.useCallback)(e=>{A(e),z("")},[]),ej=(0,l.useCallback)(e=>{n(t=>({...t,activeFile:e.file})),ep(e),I(!1)},[ep]),ev=(0,l.useCallback)(()=>{let e=new Blob([JSON.stringify({...a,tabulations:a.tabulations},null,2)],{type:"application/json"}),t=URL.createObjectURL(e),s=document.createElement("a");s.href=t,s.download="text-viewer-state.json",document.body.appendChild(s),s.click(),document.body.removeChild(s),URL.revokeObjectURL(t)},[a]),eb=(0,l.useCallback)(e=>{var t;let a=null===(t=e.target.files)||void 0===t?void 0:t[0];if(a){let e=new FileReader;e.onload=e=>{var t;let a=null===(t=e.target)||void 0===t?void 0:t.result;try{let e=JSON.parse(a);n(e)}catch(e){console.error("Error parsing uploaded state:",e),alert("Invalid state file. Please upload a valid JSON file.")}},e.readAsText(a)}},[]),eN=(0,l.useCallback)(e=>{n(t=>{let a={...t.files[t.activeFile]},s={...a.tags},l="search-".concat(e.replace(/\s+/g,"-").toLowerCase());return s[l]&&delete s[l],a.tags=s,{...t,files:{...t.files,[t.activeFile]:a}}})},[]),ey=(0,l.useCallback)(e=>{let t=new Blob([a.files[e].content],{type:"text/plain;charset=utf-8"}),s=URL.createObjectURL(t),l=document.createElement("a");l.href=s,l.download=e,document.body.appendChild(l),l.click(),document.body.removeChild(l),URL.revokeObjectURL(s)},[a.files]),eF=(0,l.useCallback)(e=>{e&&(n(t=>{let a={...t.files};delete a[e];let s=e===t.activeFile?Object.keys(a)[0]:t.activeFile;return{...t,files:a,activeFile:s}}),c(""))},[]),eA=(0,l.useCallback)((e,t)=>{let a=Array.from(new Set(t.toLowerCase().replace(/[^\w\s]/g,"").split(/\s+/).filter(t=>t.length>3&&t!==e.toLowerCase()))).filter(t=>t!==e.toLowerCase()).slice(0,5),s=["sample","text","right","click","part","tags","overlapping"].filter(t=>t!==e.toLowerCase());return a.length<2?"text"===e.toLowerCase()?["document","content","writing","passage","material"]:"search"===e.toLowerCase()?["find","locate","discover","query","lookup"]:"tag"===e.toLowerCase()?["label","mark","category","classify","annotate"]:"sample"===e.toLowerCase()?["example","specimen","instance","case","illustration"]:s.slice(0,5):a},[]),eL=(0,l.useCallback)(async()=>{if(E){H(!0),W([]),M(!0);try{let e=await fetch("/api/synonyms",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({word:E})});if(!e.ok)throw Error("Failed to fetch synonyms");let t=(await e.json()).synonyms||[];t&&0!==t.length||(t=eA(E,q.content)),W(t)}catch(e){console.error("Error fetching synonyms:",e),W(eA(E,q.content))}finally{H(!1)}}},[E,q.content,eA]),eE=(0,l.useCallback)(e=>{e.forEach(e=>{let t="search-".concat(e.replace(/\s+/g,"-").toLowerCase());if(q.tags[t])return;let s=[],l=q.content.toLowerCase().indexOf(e.toLowerCase()),r=0;for(;-1!==l&&r<1e3;)s.push({text:q.content.slice(l,l+e.length),start:l,end:l+e.length}),l=q.content.toLowerCase().indexOf(e.toLowerCase(),l+1),r++;s.length>0&&n(e=>({...e,files:{...e.files,[a.activeFile]:{...e.files[a.activeFile],tags:{...e.files[a.activeFile].tags,[t]:{type:"Search",color:eR(),occurrences:s}}}}}))}),M(!1)},[q.tags,q.content,a.activeFile]),ez=(0,l.useCallback)(()=>{if(!q.content)return null;let e=[];if(Object.entries(q.tags).forEach(t=>{var a;let[s,l]=t,r=s.split("-").slice(1).join("-");null===(a=l.occurrences)||void 0===a||a.forEach(t=>{e.push({start:t.start,end:t.end,tag:r,type:l.type,color:l.color})})}),E){let t="search-".concat(E.replace(/\s+/g,"-").toLowerCase());q.tags[t]||et.forEach(t=>{e.push({start:t.start,end:t.end,tag:E,type:"Search",color:"hsl(200, 100%, 80%)"})})}e.sort((e,t)=>e.start-t.start);let t=[],a=new Set;e.forEach(e=>{a.add(e.start),a.add(e.end)}),a.add(0),a.add(q.content.length);let l=Array.from(a).sort((e,t)=>e-t);for(let a=0;a<l.length-1;a++){let s=l[a],r=l[a+1];if(s===r)continue;let n=q.content.slice(s,r),i=e.filter(e=>e.start<=s&&e.end>=r);t.push({text:n,start:s,end:r,occurrences:i})}return t.map((e,t)=>{if(0===e.occurrences.length)return(0,s.jsx)("span",{children:e.text},t);let a=e.occurrences.some(e=>"Search"===e.type&&e.tag===E||"Tag"===e.type&&e.tag===F),l={};if(1===e.occurrences.length)l.backgroundColor=e.occurrences[0].color,l.opacity=a?1:.5;else{let t=e.occurrences.map((t,a)=>"".concat(t.color," ").concat(100*a/e.occurrences.length,"%, ").concat(t.color," ").concat((a+1)*100/e.occurrences.length,"%")).join(", ");l.background="linear-gradient(135deg, ".concat(t,")"),l.opacity=a?1:.5}let r=e.occurrences.map(e=>"".concat(e.type,": ").concat(e.tag)).join("\n");return(0,s.jsx)("mark",{style:l,title:r,className:"rounded-sm",children:e.text},t)})},[q.content,q.tags,et,E,F]),eI=(0,l.useMemo)(()=>{let e={};return Object.entries(q.tags).forEach(t=>{let[a,s]=t;if("Tag"===s.type){var l;let t=a.split("-").slice(1).join("-");e[t]||(e[t]={color:s.color,occurrences:[]}),(null===(l=s.occurrences)||void 0===l?void 0:l.length)&&e[t].occurrences.push(...s.occurrences)}}),Object.entries(e).map(e=>{let[t,s]=e;return{id:t,text:t,color:s.color,positions:{[a.activeFile]:s.occurrences.map(e=>({text:e.text,start:e.start,stop:e.end}))}}})},[q.tags,a.activeFile]),eV=(0,l.useCallback)(e=>{if(!e)return[];let t="search-".concat(e.replace(/\s+/g,"-").toLowerCase()),a=q.tags[t];return a?a.occurrences.map(e=>({text:e.text,start:e.start,stop:e.end})):et.map(e=>({text:e.text,start:e.start,stop:e.end}))},[q.tags,et]),eZ=(0,l.useCallback)(e=>{e.preventDefault()},[]),eM=(0,l.useMemo)(()=>U?{markings:Object.entries(q.tags).map(e=>{let[t,s]=e,l=t.split("-").slice(1).join("-");return{id:t,type:s.type.toLowerCase(),text:l,color:s.color,positions:{[a.activeFile]:s.occurrences.map(e=>({text:e.text,start:e.start,stop:e.end}))}}}),files:{[a.activeFile]:{name:a.activeFile,content:q.content,dirty:q.dirty,positions:Object.entries(q.tags).reduce((e,t)=>{let[a,s]=t;return e[a]=s.occurrences.map(e=>({text:e.text,start:e.start,stop:e.end})),e},{})}},tabulations:a.tabulations,activeFile:a.activeFile}:null,[U,q,a.activeFile,a.tabulations]);return(0,s.jsxs)("div",{className:"container mx-auto py-6 h-screen flex flex-col",children:[(0,s.jsxs)("div",{className:"flex justify-between items-center mb-4",children:[(0,s.jsx)("h1",{className:"text-2xl font-bold",children:"Text File Viewer"}),(0,s.jsxs)("div",{className:"flex items-center gap-2",children:[(0,s.jsxs)(r.$,{onClick:()=>I(!0),children:[(0,s.jsx)(eC.A,{className:"h-4 w-4 mr-2"}),"Tabulate"]}),(0,s.jsxs)(r.$,{onClick:ev,children:[(0,s.jsx)(ed.A,{className:"h-4 w-4 mr-2"}),"Download State"]}),(0,s.jsxs)(r.$,{onClick:()=>{var e;return null===(e=Y.current)||void 0===e?void 0:e.click()},children:[(0,s.jsx)(em.A,{className:"h-4 w-4 mr-2"}),"Upload State"]}),(0,s.jsx)("input",{type:"file",ref:Y,onChange:eb,style:{display:"none"},accept:".json"}),(0,s.jsx)(ew,{})]})]}),(0,s.jsxs)("div",{className:"flex flex-grow overflow-hidden",children:[(0,s.jsx)(eg,{files:Object.keys(a.files),activeFile:a.activeFile,onSelectFile:en,onAddFile:ei,onUploadFile:eo,onSaveFile:ey,onRemoveFile:e=>{c(e)}}),(0,s.jsxs)("div",{className:"flex-grow grid gap-6 md:grid-cols-2 h-full overflow-hidden",children:[(0,s.jsxs)("div",{className:"flex flex-col",children:[(0,s.jsxs)("div",{className:"mb-4 flex gap-2",children:[(0,s.jsxs)(L,{value:F,onValueChange:eh,children:[(0,s.jsx)(T,{className:"w-[180px]",children:(0,s.jsx)(O,{placeholder:"Filter tags..."})}),(0,s.jsxs)(_,{children:[(0,s.jsx)($,{value:"all",children:"All Tags"}),es.map(e=>{var t,a;return(0,s.jsxs)($,{value:e,className:"flex items-center gap-2",children:[(0,s.jsx)("div",{className:"w-3 h-3 rounded inline-block mr-2",style:{backgroundColor:null===(a=Object.entries(q.tags).find(t=>{let[a,s]=t;return"Tag"===s.type&&a.includes(e)}))||void 0===a?void 0:null===(t=a[1])||void 0===t?void 0:t.color}}),e]},e)})]})]}),(0,s.jsxs)("form",{onSubmit:eZ,className:"flex-1 flex gap-2",children:[(0,s.jsxs)("div",{className:"relative flex-1",children:[(0,s.jsx)(i,{type:"text",placeholder:"Search...",value:E,onChange:e=>z(e.target.value),className:"pr-8"}),E&&(0,s.jsx)(r.$,{type:"button",variant:"ghost",size:"icon",className:"absolute right-0 top-0 h-full",onClick:()=>z(""),children:(0,s.jsx)(v.A,{className:"h-4 w-4"})})]}),(0,s.jsx)(r.$,{type:"submit",children:(0,s.jsx)(Z.A,{className:"h-4 w-4"})}),(0,s.jsx)(r.$,{type:"button",onClick:ea,disabled:!E||el.includes(E),children:(0,s.jsx)(ek.A,{className:"h-4 w-4"})}),(0,s.jsx)(r.$,{type:"button",onClick:eL,disabled:!E,title:"Find synonyms",children:(0,s.jsx)(eS.A,{className:"h-4 w-4"})})]})]}),(0,s.jsx)("div",{ref:K,className:"text-lg p-4 border rounded relative whitespace-pre-wrap h-full overflow-auto",contentEditable:!1,suppressContentEditableWarning:!0,onInput:e=>er(e.currentTarget.textContent||""),onContextMenu:G,children:q.content?ez():null})]}),(0,s.jsx)("div",{className:"space-y-6 overflow-auto",children:(0,s.jsx)(e_,{direction:"horizontal",className:"rounded-lg border",children:(0,s.jsx)(e$,{defaultSize:100,children:(0,s.jsxs)(e_,{direction:"vertical",children:[(0,s.jsx)(e$,{defaultSize:50,children:(0,s.jsx)("div",{className:"flex h-full items-center justify-center p-6",children:(0,s.jsx)(B.Z,{tags:eI,onTagClick:ec,onOccurrenceClick:ep,highlightedTag:F})})}),(0,s.jsx)(eB,{}),(0,s.jsx)(e$,{defaultSize:50,children:(0,s.jsx)("div",{className:"flex h-full items-center justify-center p-6",children:(0,s.jsx)(D,{content:q.content,currentSearchResults:eV(E),savedSearches:el,onSelectSearch:ef,onSelectSpecificSearch:ep,onRemoveSearch:eN,highlightedSearch:E})})})]})})})})]})]}),U&&eM&&(0,s.jsx)(eu,{state:eM,onClose:()=>I(!1),onSelectOccurrence:ej,setState:e=>{n(t=>({...t,tabulations:e.tabulations}))},activeFile:a.activeFile}),(0,s.jsxs)(m,{open:!!h,onOpenChange:()=>j(null),children:[(0,s.jsx)(f,{asChild:!0,children:(0,s.jsx)("div",{style:{position:"fixed",left:null!==(e=null==h?void 0:h.x)&&void 0!==e?e:0,top:null!==(t=null==h?void 0:h.y)&&void 0!==t?t:0},onContextMenu:G})}),(0,s.jsxs)(x,{children:[es.map(e=>{var t,a;return(0,s.jsxs)(p,{onSelect:()=>X(e),className:"flex items-center gap-2",children:[(0,s.jsx)("div",{className:"w-3 h-3 rounded",style:{backgroundColor:null===(a=Object.entries(q.tags).find(t=>{let[a,s]=t;return"Tag"===s.type&&a.includes(e)}))||void 0===a?void 0:null===(t=a[1])||void 0===t?void 0:t.color}}),e]},e)}),es.length>0&&(0,s.jsx)(g,{}),(0,s.jsx)(p,{onSelect:Q,children:"New Tag..."})]})]}),(0,s.jsx)(b,{open:S,onOpenChange:R,children:(0,s.jsxs)(w,{children:[(0,s.jsx)(C,{children:(0,s.jsx)(k,{children:"Create New Tag"})}),(0,s.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,s.jsx)(i,{type:"text",placeholder:"Enter new tag label",value:N,onChange:e=>y(e.target.value)}),(0,s.jsx)(r.$,{onClick:ee,children:"Add"})]})]})}),V&&(0,s.jsx)(eO,{word:E,synonyms:P,isLoading:J,onClose:()=>M(!1),onSave:eE}),(0,s.jsx)(eT,{isOpen:o,setIsOpen:c,warningMessage:ex.D.deleteFileWarningMessage,onConfirm:()=>eF(o)})]})}},3999:(e,t,a)=>{"use strict";a.d(t,{N:()=>o,U:()=>i,cn:()=>n});var s=a(8828),l=a(2596),r=a(9688);function n(){for(var e=arguments.length,t=Array(e),a=0;a<e;a++)t[a]=arguments[a];return(0,r.QP)((0,l.$)(t))}function i(e){return e&&"string"==typeof e?/[\\\/:*?"<>|\s]/.test(e)?{isValid:!1,error:s.D.fileNameFormatError}:""===e.trim()?{isValid:!1,error:s.D.fileNameCannotEmptyOrContainWhitespace}:e.length>255?{isValid:!1,error:s.D.fileNameLengthError}:{isValid:!0,error:null}:{isValid:!1,error:s.D.fileNameStringError}}function o(e){if(!e||"string"!=typeof e)return"";let t=e.trim();return t.toLowerCase().endsWith(".txt")?t:"".concat(t,".txt")}},5204:(e,t,a)=>{"use strict";a.d(t,{Ke:()=>n,Nt:()=>l,R6:()=>r});var s=a(8106);let l=s.bL,r=s.R6,n=s.Ke},5396:(e,t,a)=>{"use strict";a.d(t,{Z:()=>d});var s=a(5155),l=a(8482),r=a(5204),n=a(6891),i=a(5448),o=a(3052),c=a(7808);function d(e){let{tags:t,onTagClick:a,onOccurrenceClick:d,highlightedTag:u}=e;return(0,s.jsxs)(l.Zp,{className:"w-full h-full",children:[(0,s.jsx)(l.aR,{children:(0,s.jsxs)(l.ZB,{className:"flex items-center gap-2",children:[(0,s.jsx)(i.A,{className:"h-5 w-5"}),"Tag Analysis"]})}),(0,s.jsx)(l.Wu,{children:(0,s.jsx)(n.F,{className:"h-[300px] pr-4",children:(0,s.jsx)("div",{className:"space-y-4",children:null==t?void 0:t.map(e=>{var t;return(0,s.jsxs)(r.Nt,{children:[(0,s.jsxs)(r.R6,{className:"flex w-full items-center gap-2 rounded-lg border bg-card p-4 text-left hover:bg-accent ".concat(u===e.text?"bg-green-200":""),onClick:()=>a(e.text),children:[(0,s.jsx)(o.A,{className:"h-4 w-4 shrink-0 transition-transform duration-200 ".concat(u===e.text?"rotate-90":"")}),(0,s.jsx)("div",{className:"h-3 w-3 rounded",style:{backgroundColor:e.color}}),(0,s.jsx)("span",{className:"font-semibold",children:e.text}),(0,s.jsxs)("span",{className:"ml-auto rounded-full bg-muted px-2 py-0.5 text-sm text-muted-foreground",children:[e.positions?Object.values(e.positions).flat().length:0," occurrences"]})]}),(0,s.jsx)(r.Ke,{className:"mt-2 space-y-2",children:e.positions&&(null===(t=Object.entries(e.positions))||void 0===t?void 0:t.map(t=>{let[a,l]=t;return null==l?void 0:l.map((t,l)=>(0,s.jsx)(c.$,{text:t.text,start:t.start,stop:t.stop,isHighlighted:u===e.text,onClick:()=>d(t)},"".concat(a,"-").concat(l)))}))})]},e.id)})})})})]})}},5889:(e,t,a)=>{Promise.resolve().then(a.bind(a,2243))},6891:(e,t,a)=>{"use strict";a.d(t,{F:()=>i});var s=a(5155),l=a(2115),r=a(7655),n=a(3999);let i=l.forwardRef((e,t)=>{let{className:a,children:l,...i}=e;return(0,s.jsxs)(r.bL,{ref:t,className:(0,n.cn)("relative overflow-hidden",a),...i,children:[(0,s.jsx)(r.LM,{className:"h-full w-full rounded-[inherit]",children:l}),(0,s.jsx)(o,{}),(0,s.jsx)(r.OK,{})]})});i.displayName=r.bL.displayName;let o=l.forwardRef((e,t)=>{let{className:a,orientation:l="vertical",...i}=e;return(0,s.jsx)(r.VM,{ref:t,orientation:l,className:(0,n.cn)("flex touch-none select-none transition-colors","vertical"===l&&"h-full w-2.5 border-l border-l-transparent p-[1px]","horizontal"===l&&"h-2.5 flex-col border-t border-t-transparent p-[1px]",a),...i,children:(0,s.jsx)(r.lr,{className:"relative flex-1 rounded-full bg-border"})})});o.displayName=r.VM.displayName},7168:(e,t,a)=>{"use strict";a.d(t,{$:()=>c});var s=a(5155),l=a(2115),r=a(9708),n=a(2085),i=a(3999);let o=(0,n.F)("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0",{variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground hover:bg-destructive/90",outline:"border border-input bg-background hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-10 px-4 py-2",sm:"h-9 rounded-md px-3",lg:"h-11 rounded-md px-8",icon:"h-10 w-10"}},defaultVariants:{variant:"default",size:"default"}}),c=l.forwardRef((e,t)=>{let{className:a,variant:l,size:n,asChild:c=!1,...d}=e,u=c?r.DX:"button";return(0,s.jsx)(u,{className:(0,i.cn)(o({variant:l,size:n,className:a})),ref:t,...d})});c.displayName="Button"},7808:(e,t,a)=>{"use strict";a.d(t,{$:()=>n});var s=a(5155),l=a(2138),r=a(8482);function n(e){let{text:t,start:a,end:n,isHighlighted:i,onClick:o}=e;return(0,s.jsx)(r.Zp,{className:"cursor-pointer hover:bg-accent ".concat(i?"bg-green-200":""),onClick:o,children:(0,s.jsx)(r.Wu,{className:"p-4",children:(0,s.jsxs)("div",{className:"flex items-start gap-2",children:[(0,s.jsx)("div",{className:"mt-1.5 shrink-0",children:(0,s.jsx)(l.A,{className:"h-4 w-4 text-muted-foreground"})}),(0,s.jsxs)("div",{className:"space-y-1",children:[(0,s.jsxs)("p",{className:"font-mono text-sm",children:["Position: ",a," → ",n]}),(0,s.jsx)("div",{className:"rounded border bg-muted p-2",children:(0,s.jsxs)("p",{className:"text-sm",children:["“",t,"”"]})})]})]})})})}},8482:(e,t,a)=>{"use strict";a.d(t,{Wu:()=>c,ZB:()=>o,Zp:()=>n,aR:()=>i});var s=a(5155),l=a(2115),r=a(3999);let n=l.forwardRef((e,t)=>{let{className:a,...l}=e;return(0,s.jsx)("div",{ref:t,className:(0,r.cn)("rounded-lg border bg-card text-card-foreground shadow-sm",a),...l})});n.displayName="Card";let i=l.forwardRef((e,t)=>{let{className:a,...l}=e;return(0,s.jsx)("div",{ref:t,className:(0,r.cn)("flex flex-col space-y-1.5 p-6",a),...l})});i.displayName="CardHeader";let o=l.forwardRef((e,t)=>{let{className:a,...l}=e;return(0,s.jsx)("div",{ref:t,className:(0,r.cn)("text-2xl font-semibold leading-none tracking-tight",a),...l})});o.displayName="CardTitle",l.forwardRef((e,t)=>{let{className:a,...l}=e;return(0,s.jsx)("div",{ref:t,className:(0,r.cn)("text-sm text-muted-foreground",a),...l})}).displayName="CardDescription";let c=l.forwardRef((e,t)=>{let{className:a,...l}=e;return(0,s.jsx)("div",{ref:t,className:(0,r.cn)("p-6 pt-0",a),...l})});c.displayName="CardContent",l.forwardRef((e,t)=>{let{className:a,...l}=e;return(0,s.jsx)("div",{ref:t,className:(0,r.cn)("flex items-center p-6 pt-0",a),...l})}).displayName="CardFooter"},8828:(e,t,a)=>{"use strict";a.d(t,{D:()=>s});let s={deleteFileWarningMessage:"This deletion can't be recover, are you sure you want to delete this file?",fileExistWithSameName:"File already exist with same name.",fileNameStringError:"Filename must be a non-empty string.",fileNameFormatError:'Filename cannot contain spaces or special characters (\\ / : * ? " < > |).',fileNameCannotEmptyOrContainWhitespace:"Filename cannot be empty or whitespace.",fileNameLengthError:"Filename cannot be longer than 255 characters."}}},e=>{var t=t=>e(e.s=t);e.O(0,[543,985,441,684,358],()=>t(5889)),_N_E=e.O()}]);